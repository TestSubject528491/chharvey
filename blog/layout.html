<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Flexbox Layout</title>
<meta charset="UTF-8"/>
<meta name="author" content="Christopher H. Harvey"/>
<meta name="description" content="Using Flexbox to lay out Elements on a page."/>
<meta name="keywords" content="Flexbox, layout, CSS, Less"/>
<link rel="stylesheet" href="../node_modules/normalize.css/normalize.css"/>
<link rel="stylesheet" href="../core/styles/default.css"/>
<link rel="stylesheet" href="../core/styles/core.css"/>
</head>
<body>
<main class="MainGolden Article" data-status="draft">
<header>
  <h1>Flexbox Layout</h1>
  <dl class="Docmeta">
    <dt>Author</dt>
    <dd>Christopher H. Harvey</dd>
    <dt>Description</dt>
    <dd>Using Flexbox to lay out Elements on a page.</dd>
    <dt>Keywords</dt>
    <dd>Flexbox</dd>
    <dd>layout</dd>
    <dd>CSS</dd>
    <dd>Less</dd>
    <dt>Version History</dt>
    <dd class="update"><time datetime="2015-02-13 15:23">Feb 13, 2015 <span class="hm">3:23 PM</span></time></dd>
    <dd class="update"><time datetime="2015-02-19 13:01">Feb 19, 2015 <span class="hm">1:01 PM</span></time></dd>
    <dd class="update"><time datetime="2015-02-19 19:23">Feb 19, 2015 <span class="hm">7:23 PM</span></time></dd>
    <dd class="update latest"><time datetime="2015-02-20 01:04">Feb 20, 2015 <span class="hm">1:04 AM</span></time></dd>
  </dl>
</header>
<p class="Intro">Laying out a page is easier than it may seem. Everything on the page belongs in blocks, and
  each block has a size and position. That&rsquo;s all there is to it. There are many methods,
  good and bad, of how to achieve this, but that is the gist of what needs to happen.</p>
<p>Of all the grid systems out there, this article does not discuss any of them.
  Rather, after reading this article, hopefully you will see the <strong>anti-need</strong> for any grid system, and
  certainly how ridiculous it is that there are so many of them. You will create your own layout
  (read, <em>layout</em>, not grid) using pure CSS3.</p>
<p>Before delving too far, though, you should probably get yourself
  up-to-speed on the <a rel="external" href="http://lesscss.org/">Less</a> CSS preprocessor, and the
  <a rel="external" href="http://www.w3.org/TR/css3-flexbox/">CSS Flexible Box Layout Module</a>,
  or &ldquo;<a rel="external" href="http://css-tricks.com/snippets/css/a-guide-to-flexbox/">Flexbox</a>,&rdquo;
  for short. This article is not a Flexbox tutorial, but rather a guide on how to <em>use</em> it
  (along with <a rel="external"
  href="https://github.com/chharvey/chharvey.github.io/blob/master/core/styles/tools/_layout.less">my
  implementation</a>)
  to obtain the layout you want.</p>
<p>Now, think about how you design a layout. Ask yourself,
  for each block, where will it go? What will it go next to? How wide will it be? If it&rsquo;s not
  full-width, will it go next to anything? If so, what? How wide is that thing? How many
  things can fit horizontally across the page? Will this change on different parts of the page?</p>
<p>The easiest way to approach these questions is to first decide on the size, or width, of each
  block, and then put it into position. Then you might realize it didn&rsquo;t add up, and so you
  have to make some tweaks. And then you might decide to change the order of blocks, so you do that,
  and then you have to change all the widths again. Unfortunately this seems like a circular process,
  going back and forth between widths and position and widths again. <b>Flexbox</b> makes this easy: you
  can do this all in CSS, without ever having to touch your HTML.</p>
<p><i style="quotes: none;">Wait, what? You&rsquo;re saying that presentation is not at all related
  to content?</i> Let me reiterate. <strong>You can change the sizing, positioning, and ordering of
  elements on a page without having to touch the HTML.</strong> This means no wrapper divs,
  no table rows, no presentational clases, and no huge commits. Have I caught your attention yet?</p>
<section id="widths">
  <h2>Setting Widths</h2>
  <p>Let&rsquo;s set some widths. The easiest way to set the width of an Element is to use the CSS
    <code>width</code> property. You can do this with inline styles (yuck) or you can add it to
    the Element&rsquo;s class&rsquo; definition in an external stylesheet. Your life will be
    significantly easier if you let <b>Less</b> do all the mathematical calculations, so use it.
    Oh and by the way, Less won&rsquo;t work with inline styles anyway, so there&rsquo;s that.
    The figure below illustrates a simplified version of my code.
    <a rel="external"
    href="https://github.com/chharvey/chharvey.github.io/blob/master/core/styles/tools/_layout.less">The
    actual code</a> is on GitHub.</p>
  <pre>
<small>// even widths:        // golden widths:</small>
<span class="c__Arg">@1o1</span>: <span class="c__Cst">100%</span>;            <span class="c__Arg">@golden0</span>: <span class="c__Cst">100%</span>;
<span class="c__Arg">@1o2</span>: <span class="c__Cst"> 50%</span>;            <span class="c__Arg">@golden1</span>:  <span class="c__Cst">61.803%</span>;
<span class="c__Arg">@2o2</span>: <span class="c__Cst">100%</span>;            <span class="c__Arg">@golden2</span>:  <span class="c__Cst">38.197%</span>;
<span class="c__Arg">@1o3</span>: <span class="c__Cst"> 33.333%</span>;        <span class="c__Arg">@golden3</span>:  <span class="c__Cst">23.607%</span>;
<span class="c__Arg">@2o3</span>: <span class="c__Cst"> 66.666%</span>;        <span class="c__Arg">@golden4</span>:  <span class="c__Cst">14.590%</span>;
<span class="c__Arg">@3o3</span>: <span class="c__Cst">100%</span>;            <span class="c__Arg">@golden3c</span>: <span class="c__Cst">76.393%</span>;
<span class="c__Arg">@1o4</span>: <span class="c__Cst"> 25%</span>;            <span class="c__Arg">@golden4c</span>: <span class="c__Cst">85.410%</span>;
<span class="c__Arg">@2o4</span>: <span class="c__Cst"> 50%</span>;
<span class="c__Arg">@3o4</span>: <span class="c__Cst"> 75%</span>;
<span class="c__Arg">@4o4</span>: <span class="c__Cst">100%</span>;
<span class="c__Arg">@1o5</span>: <span class="c__Cst"> 20%</span>;
<span class="c__Arg">@2o5</span>: <span class="c__Cst"> 40%</span>;
<span class="c__Arg">@3o5</span>: <span class="c__Cst"> 60%</span>;
<span class="c__Arg">@4o5</span>: <span class="c__Cst"> 80%</span>;
<span class="c__Arg">@5o5</span>: <span class="c__Cst">100%</span>;
<span class="c__Arg">@1o6</span>: <span class="c__Cst"> 16.666%</span>;
<span class="c__Arg">@2o6</span>: <span class="c__Cst"> 33.333%</span>;
<span class="c__Arg">@3o6</span>: <span class="c__Cst"> 50%</span>;
<span class="c__Arg">@4o6</span>: <span class="c__Cst"> 66.666%</span>;
<span class="c__Arg">@5o6</span>: <span class="c__Cst"> 83.333%</span>;
<span class="c__Arg">@6o6</span>: <span class="c__Cst">100%</span>;
</pre>
  <p>Sometimes, setting the width in CSS is too much work, so <strong>to quickly change
    the style of an Element using HTML</strong>, you may add <b>helper classes</b>
    to the <code>class</code> attribute of the Element. Yes, <strong>this is bad practice</strong>, but
    it&rsquo;s a pragmatic solution that prevents CSS bloat. This document uses these
    so-called <i>inline helpers</i> for illustration purposes, but in the long run, you&rsquo;ll
    want to migrate them over to CSS and use more semantic classnames.
    That&rsquo;s what <b>Less</b> includes and extends are for.</p>
  <pre>
<small>// even widths:              // golden widths:</small>
<span class="c__Sel">.w-1o1</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@1o1</span>;}        <span class="c__Sel">.w-p1 </span> {<span class="c__Prp">width</span>: <span class="c__Arg">@golden1</span>;}
<span class="c__Sel">.w-1o2</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@1o2</span>;}        <span class="c__Sel">.w-p2 </span> {<span class="c__Prp">width</span>: <span class="c__Arg">@golden2</span>;}
<span class="c__Sel">.w-2o2</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@2o2</span>;}        <span class="c__Sel">.w-p3 </span> {<span class="c__Prp">width</span>: <span class="c__Arg">@golden3</span>;}
<span class="c__Sel">.w-1o3</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@1o3</span>;}        <span class="c__Sel">.w-p4 </span> {<span class="c__Prp">width</span>: <span class="c__Arg">@golden4</span>;}
<span class="c__Sel">.w-2o3</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@2o3</span>;}        <span class="c__Sel">.w-p3c</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@golden3c</span>;}
<span class="c__Sel">.w-3o3</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@3o3</span>;}        <span class="c__Sel">.w-p4c</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@golden4c</span>;}
<span class="c__Sel">.w-1o4</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@1o4</span>;}
<span class="c__Sel">.w-2o4</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@2o4</span>;}
<span class="c__Sel">.w-3o4</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@3o4</span>;}
<span class="c__Sel">.w-4o4</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@4o4</span>;}
<span class="c__Sel">.w-1o5</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@1o5</span>;}
<span class="c__Sel">.w-2o5</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@2o5</span>;}
<span class="c__Sel">.w-3o5</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@3o5</span>;}
<span class="c__Sel">.w-4o5</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@4o5</span>;}
<span class="c__Sel">.w-5o5</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@5o5</span>;}
<span class="c__Sel">.w-1o6</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@1o6</span>;}
<span class="c__Sel">.w-2o6</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@2o6</span>;}
<span class="c__Sel">.w-3o6</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@3o6</span>;}
<span class="c__Sel">.w-4o6</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@4o6</span>;}
<span class="c__Sel">.w-5o6</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@5o6</span>;}
<span class="c__Sel">.w-6o6</span> {<span class="c__Prp">width</span>: <span class="c__Arg">@6o6</span>;}
</pre>
  <p>A little math will make it obvious which of these widths will combine to make
    a full 100% (see the <a rel="child" href="griddemo.html">grid demo</a> for a full
    list of combinations).</p>
  <aside style="padding: 12px 1em; border: 1px solid #9acc7a; border-radius: 6px; background: #E3EFDB;">
    <h3 style="text-align: center;">Side Project</h3>
    <p>Here&rsquo;s some fun math to think about for your design. In a row with two blocks,
      each block should be 50% to add up to 100%. For three blocks, each should be ≈33.3%.
      Working backwards, you should be able to figure out what the width of one block
      should be, depending on the pattern you use. The last one is just there because
      how could I not include the Golden Ratio?</p>
    <figure class="Text flex-container--center">
      <p class="w-1o1 help-otln">Use <code>.w-1o1</code> (100%) to model the
        <b>harmonic sequence</b>
        <span class="M B">\left(\infty,\mathbf{1,\frac{1}{2},\frac{1}{3}},\frac{1}{4},\dots,\frac{1}{n}\right)</span>
        where <span class="M">n</span> is the number of blocks
        (<span class="M">n</span> starts at 0).</p>
      <p class="w-3o4 help-otln">Use <code>.w-3o4</code> (75%) to model the
        <b>geometric sequence</b>
        <span class="M B">\left(\frac{9}{8},\mathbf{\frac{3}{4},\frac{1}{2},\frac{1}{3}},\frac{2}{9},\dots,\frac{2^{n-3}}{3^{n-2}}\right)</span>
        where <span class="M">n</span> is the number of blocks
        (<span class="M">n</span> starts at 0).</p>
      <p class="w-2o3 help-otln">Use <code>.w-2o3</code> (66.6%) to model the
        <b>arithmetic sequence</b>
        <span class="M B">\left(\frac{5}{6},\mathbf{\frac{2}{3},\frac{1}{2},\frac{1}{3}},\frac{1}{6},\dots,\frac{5-n}{6}\right)</span>
        where <span class="M">n</span> is the number of blocks
        (<span class="M">n</span> starts at 0).</p>
      <p class="w-p1 help-otln">Use <code>.w-p1</code> (61.8%) to model the
        <a href="../core/doc/phi.html">Golden Ratio <span class="M">\Phi</span></a>.</p>
      <figcaption>The width of a one-column block varies depending on which mathematical sequence
        is being used to model the layout.</figcaption>
    </figure>
  </aside>
  <del>
  <section>
    <h3>Positioning</h3>
    <p>When a <i>line</i> (that is, a visual horozontal arrangement of blocks) has
      only one block, you have a few options for how to position it.</p>
    <p>The worst is using floats. This only pushes the block flush left or flush right, and
      wraps subsequent content around it, requiring a hack known as a <i>clearfix</i> to
      prevent this behavior. Floats are good for flyers and newsletters when you need
      to wrap text around an image, but they are not good at all for laying out a page.</p>
    <p>Instead, you can use <code>position: relative;</code> or <code>position: absolute;</code>,
      with a value for <code>left</code> or <code>right</code>. The downside of these is that you
      cannot center a block on a line.</p>
    <p>My recommendation is to use margins. To horizontally position a block,
      add left and right margins in the CSS. You can add the <code>.margin-even</code> <b>Interface</b>
      to an HTML Element to center the block, or you can include or <code>:extend()</code> it in Less.
      There are no other automatic Interfaces for adding margins&mdash;you&rsquo;ll need
      to write good-old-fashioned CSS if you want to position a block in a non-centered
      way.<sup><a class="Rf" id="rf-sitelayout" rel="this" href="#fn-sitelayout">[1]</a></sup>
      Keep in mind you can use the Less variables so you don&rsquo;t have to do the math by hand.</p>
    <pre>.margin-even {margin-left: auto; margin-right: auto;}</pre>
    <footer>
      <ul class="Footnotes">
        <li><sup><a class="Fn" id="fn-sitelayout" rel="this" href="#rf-sitelayout">[1]</a></sup>This
          site uses a main width of about 61.8% (the <a
          href="../core/doc/phi.html">Golden Ratio</a>) with the remaining 38.2% split into
          the left and right margins: about 23.6% on the left and about 14.6% on the right&mdash;another
          Golden Ratio.</li>
      </ul>
    </footer>
  </section>
  </del>
</section>
<section>
  <h2>Multiple Blocks</h2>
  <p>To set up a layout with multiple blocks that will visually appear on one or more lines,
    you&rsquo;ll need to use the Flexbox model. In this model, a <dfn id="flex-container">flex-container</dfn> is a block
    that contains other blocks, called <dfn id="flex-item">flex-items</dfn>, inside.</p>
  <p>Most likely, your HTML is already structured this way: the blocks you want to
    lay out together are likely already wrapped in some sort of container. All you need to do is add
    the <code>.flex-container</code> <b>Interface</b> to the container. Then, optionally use the width Interfaces mentioned
    above to set the proper widths of each of the items (if not, their widths will automatically
    fit their content). That&rsquo;s it! Layout done.</p>
  <figure>
    <pre>
&lt;div class="flex-container"&gt;
  &lt;div class="w-1o6"&gt; flex-item 1! &lt;/div&gt;
  &lt;div class="w-2o6"&gt; flex-item 2! &lt;/div&gt;
  &lt;div class="w-3o6"&gt; flex-item 3! &lt;/div&gt;
&lt;/div&gt;
</pre>
    <div class="flex-container">
      <div class="w-1o6 help-otln"> flex-item 1! </div>
      <div class="w-2o6 help-otln"> flex-item 2! </div>
      <div class="w-3o6 help-otln"> flex-item 3! </div>
    </div>
  </figure>
  <p>Luckily, the widths add up to 100%. If they add up to too much, the items will wrap
    to the next line. If they don&rsquo;t add up to enough, there will be extra space.</p>
  <figure>
    <pre>
&lt;div class="flex-container"&gt;
  &lt;div class="w-2o6"&gt; flex-item 1! &lt;/div&gt;
  &lt;div class="w-2o6"&gt; flex-item 2! &lt;/div&gt;
  &lt;div class="w-3o6"&gt; flex-item 3! &lt;/div&gt;
&lt;/div&gt;
</pre>
    <div class="flex-container">
      <div class="w-2o6 help-otln">flex-item 1!</div>
      <div class="w-2o6 help-otln">flex-item 2!</div>
      <div class="w-3o6 help-otln">flex-item 3!</div>
    </div>
  </figure>
  <figure>
    <pre>
&lt;div class="flex-container"&gt;
  &lt;div class="w-1o6"&gt; flex-item 1! &lt;/div&gt;
  &lt;div class="w-2o6"&gt; flex-item 2! &lt;/div&gt;
  &lt;div class="w-2o6"&gt; flex-item 3! &lt;/div&gt;
&lt;/div&gt;
</pre>
    <div class="flex-container">
      <div class="w-1o6 help-otln">flex-item 1!</div>
      <div class="w-2o6 help-otln">flex-item 2!</div>
      <div class="w-2o6 help-otln">flex-item 3!</div>
    </div>
  </figure>
  <p>By default, the extra space is evenly distributed <em>between</em> the items, much like
    the inter-word space in a paragraph with <code>text-align: justify;</code>.
    To override this and distribute the space <em>around</em> the blocks, leaving a little bit
    on the outside, use
    the modifier <code>.flex-container--around</code> <em>instead of</em> (not in addition to)
    the normal <code>.flex-container</code>.</p>
  <figure>
    <pre>
&lt;div class="flex-container--around"&gt;
  &lt;div class="w-2o6"&gt; flex-item 1! &lt;/div&gt;
  &lt;div class="w-2o6"&gt; flex-item 2! &lt;/div&gt;
  &lt;div class="w-3o6"&gt; flex-item 3! &lt;/div&gt;
&lt;/div&gt;
</pre>
    <div class="flex-container--around">
      <div class="w-2o6 help-otln">flex-item 1!</div>
      <div class="w-2o6 help-otln">flex-item 2!</div>
      <div class="w-3o6 help-otln">flex-item 3!</div>
    </div>
  </figure>
  <figure>
    <pre>
&lt;div class="flex-container--around"&gt;
  &lt;div class="w-1o6"&gt; flex-item 1! &lt;/div&gt;
  &lt;div class="w-2o6"&gt; flex-item 2! &lt;/div&gt;
  &lt;div class="w-2o6"&gt; flex-item 3! &lt;/div&gt;
&lt;/div&gt;
</pre>
    <div class="flex-container--around">
      <div class="w-1o6 help-otln">flex-item 1!</div>
      <div class="w-2o6 help-otln">flex-item 2!</div>
      <div class="w-2o6 help-otln">flex-item 3!</div>
    </div>
  </figure>
  <p>To completely remove the space between the items and push it all the way to the outside,
    use the modifier <code>.flex-container--center</code> instead. This acts like a paragraph with
    <code>text-align: center;</code>.</p>
  <figure>
    <pre>
&lt;div class="flex-container--center"&gt;
  &lt;div class="w-2o6"&gt; flex-item 1! &lt;/div&gt;
  &lt;div class="w-2o6"&gt; flex-item 2! &lt;/div&gt;
  &lt;div class="w-3o6"&gt; flex-item 3! &lt;/div&gt;
&lt;/div&gt;
</pre>
    <div class="flex-container--center">
      <div class="w-2o6 help-otln">flex-item 1!</div>
      <div class="w-2o6 help-otln">flex-item 2!</div>
      <div class="w-3o6 help-otln">flex-item 3!</div>
    </div>
  </figure>
  <figure>
    <pre>
&lt;div class="flex-container--center"&gt;
  &lt;div class="w-1o6"&gt; flex-item 1! &lt;/div&gt;
  &lt;div class="w-2o6"&gt; flex-item 2! &lt;/div&gt;
  &lt;div class="w-2o6"&gt; flex-item 3! &lt;/div&gt;
&lt;/div&gt;
</pre>
    <div class="flex-container--center">
      <div class="w-1o6 help-otln">flex-item 1!</div>
      <div class="w-2o6 help-otln">flex-item 2!</div>
      <div class="w-2o6 help-otln">flex-item 3!</div>
    </div>
  </figure>
  <section>
    <h3>Demo</h3>
  <p>The example below demonstrates how to use Flexbox to layout blocks on more than
    one line. Notice the lack of table rows! Also, it demonstrates the use of <code>order</code>
    to set the order of the flex-items.</p>
  <figure>
    <pre>
&lt;main class="flex-container"&gt;
  &lt;header  class="w-5o5"&gt; Header &lt;/header&gt;
  &lt;article class="w-3o5" style="order: 1;"&gt;
    &lt;p&gt; Pellentesque habitant morbi &hellip; &lt;/p&gt;
  &lt;/article&gt;
  &lt;aside   class="w-1o5"&gt; Aside 1 &lt;/aside&gt;
  &lt;aside   class="w-1o5" style="order: 2;"&gt; Aside 2 &lt;/aside&gt;
  &lt;footer  class="w-5o5" style="order: 3;"&gt; Footer &lt;/footer&gt;
&lt;/main&gt;
</pre>
    <div class="flex-container">
      <header  class="help-otln w-5o5" >Header </header>
      <article class="help-otln w-3o5" style="order: 1;">
        <p> Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. </p>
      </article>
      <aside   class="help-otln w-1o5"> Aside 1 </aside>
      <aside   class="help-otln w-1o5" style="order: 2;"> Aside 2 </aside>
      <footer  class="help-otln w-5o5" style="order: 3;"> Footer </footer>
    </div>
  </figure>
  </section>
</section>
</main>
<script src="https://code.jquery.com/jquery-2.0.3.min.js"></script>
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML,https://chharvey.github.io/chhlib/mathjax-localconfig.js"></script>
<script src="../core/scripts/global.js"></script>
</body>
</html>
