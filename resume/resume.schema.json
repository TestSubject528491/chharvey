{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://chharvey.github.io/resume/resume.schema.json",
  "title": "Resume",
  "description": "Resume of Christopher H. Harvey of Fairfax, VA.",
  "definitions": {
    "Rating": {
      "$id": "#Rating",
      "allOf": [
        { "$ref": "https://chharvey.github.io/schemaorg-jsd/schema/Thing.jsd" },
        {
          "properties": {
            "worstRating": { "const": 0 },
            "bestRating" : { "const": 1 },
            "ratingValue": { "type": "number", "minimum": 0, "maximum": 1, "description": "proficiency with this skill" }
          }
        }
      ]
    },
    "JobPosting": {
      "$id": "#JobPosting",
      "allOf": [
        { "$ref": "https://chharvey.github.io/schemaorg-jsd/schema/Thing.jsd" },
        {
          "properties": {
            "hiringOrganization": { "$ref": "https://chharvey.github.io/schemaorg-jsd/schema/Organization.jsd" },
            "jobLocation": { "$ref": "https://chharvey.github.io/schemaorg-jsd/schema/Place.jsd" },
            "responsibilities": {
              "type" : ["string", "array"],
              "items": { "type": "string" }
            },
            "title": { "type": "string" }
          }
        }
      ]
    },
    "ItemList": {
      "$id": "#ItemList",
      "allOf": [
        { "$ref": "https://chharvey.github.io/schemaorg-jsd/schema/Thing.jsd" },
        {
          "properties": {
            "itemListElement": {
              "type" : "array",
              "items": {
                "anyOf": [
                  { "type": "string" },
                  { "$ref": "https://chharvey.github.io/schemaorg-jsd/schema/Thing.jsd" }
                ]
              }
            }
          }
        }
      ]
    },
    "Content": {
      "type" : ["string", "array"],
      "items": { "type": "string" }
    },
    "Award": {
      "type": "object",
      "required": ["dates", "content"],
      "properties": {
        "dates"  : { "type": "string" , "description": "date(s) relevant to the award" },
        "content": {
          "$ref": "#/definitions/Content",
          "description": "custom HTML defining the award"
        },
        "sub_awards": {
          "type": "array",
          "description": "any sub-awards within this award",
          "items": { "$ref": "#/definitions/Award" }
        }
      }
    }
  },
  "allOf": [
    { "$ref": "https://chharvey.github.io/schemaorg-jsd/schema/Person.jsd" },
    {
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "description": true,
    "url"        : true,
    "email"      : true,
    "telephone"  : true,
    "familyName"     : true,
    "givenName"      : true,
    "additionalName" : true,
    "honorificPrefix": true,
    "honorificSuffix": true,
    "skills": {
      "type": "array",
      "description": "List of skills, grouped by category.",
      "items": {
        "$allOf": [
          { "$ref": "#ItemList" },
          {
        "required": ["name", "identifier", "itemListElement"],
        "properties": {
          "itemListElement": {
        "items": {
          "allOf": [
            { "$ref": "#Rating" },
            { "required": ["ratingValue", "name"] }
          ]
        }
          }
        }
          }
        ]
      }
    },
    "positions": {
      "type": "array",
      "description": "List of positions, grouped by category.",
      "items": {
        "allOf": [
          { "$ref": "#ItemList" },
          {
            "required": ["name", "identifier", "itemListElement"],
            "properties": {
              "itemListElement": {
                "items": {
                  "$allOf": [
                    { "$ref": "#JobPosting" },
                    {
                      "required": ["identifier", "title", "hiringOrganization", "jobLocation", "$start"],
                      "properties": {
                        "$start": { "type": "text", "format": "datetime", "description": "the start time of the job position" },
                        "$end"  : { "type": "text", "format": "datetime", "description": "the end   time of the job position" }
                      }
                    }
                  ]
                }
              }
            }
          }
        ]
      }
    },
    "degrees": {
      "type": "array",
      "description": "List of degrees.",
      "items": {
        "type": "object",
        "required": ["gpa", "field"],
        "additionalProperties": false,
        "properties": {
          "year" : { "type": "integer", "description": "year the degree was earned. if not yet earned, a negative integer" },
          "gpa"  : { "type": "number", "minimum": 0, "maximum": 4, "description": "grade-point-average" },
          "field": { "type": "string", "description": "type and field of the degree" }
        }
      }
    },
    "prodevs": {
      "type": "array",
      "description": "List of professional development hours.",
      "items": {
            "type": "object",
            "required": [
              "pdh",
              "start",
              "end",
              "city",
              "state",
              "geo",
              "coursename"
            ],
            "additionalProperties": false,
            "properties": {
              "pdh"     : { "type": "number", "description": "the number of professional development hours" },
              "itemtype": { "type": "string", "description": "the value of the eventâ€™s `itemtype` attribute" },
              "start"   : { "type": "string", "description": "the start date in ISO format" },
              "end"     : { "type": "string", "description": "the end date in ISO format" },
              "city"    : { "type": "string", "description": "the city/town/locality name" },
              "state"   : { "type": "string", "description": "the state/province/region postal code (e.g. 'NY', 'CA')" },
              "geo"     : {
                "type": "array",
                "description": "the geo-coordinates",
                "items": [
                  { "type": "number", "description": "the latitude value of the location" },
                  { "type": "number", "description": "the longitude value of the location" }
                ]
              },
              "coursename": { "$ref": "#/definitions/Content", "description": "the title of the course or event" }
            }
          }
    },
    "awards": {
      "type": "array",
      "description": "List of other awards & memberships.",
      "items": { "$ref": "#/definitions/Award" }
    },
    "teams": {
      "type": "array",
      "description": "List of athletic team memberships.",
      "items": { "$ref": "#/definitions/Award" }
    }
  }
    }
  ]
}
